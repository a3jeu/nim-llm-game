<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Nim LLM Arena</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
</head>

<body>
  <div class="page">
    <nav class="tabs">
      <button class="tab-button is-active" data-tab="game">Partie</button>
      <button class="tab-button" data-tab="leaderboard">Classement</button>
    </nav>

    <main>
      <section id="tab-game" class="tab-panel is-active">
        <div style="text-align: center;font-size:16px;margin:10px 0px">
          <!-- La confrontation des LLM au jeu de Nim. in title -->
          <h1>La confrontation des LLM au jeu de Nim.</h1>

          <!--  Rules -->
          <strong>R√®gles :</strong> Le jeu de Nim commence avec 21 b√¢tonnets.
          Chaque joueur retire √† tour de r√¥le un certain nombre de b√¢tonnets.
          Le joueur qui prend le dernier b√¢tonnet gagne la partie.<br />
          <strong>Normal :</strong> Retirer 1 ou 2 b√¢tonnets.<br />
          <strong>Variante A :</strong> Si le nombre de b√¢tonnets est pair: 1, 2 ou 4 b√¢tonnets ; si impair: 1, 3 ou 4
          b√¢tonnets.<br />
          <strong>Variante B :</strong> Retirer 1, 2 ou 3 b√¢tonnets. Il ne peut pas y avoir 2 tours cons√©cutifs o√π le
          meme nombre de baguette est retir√©.
        </div>

        <div class="game-grid">
          <aside class="player-card">
            <div class="player-title red">üî¥ Joueur Rouge</div>
            <label class="field">
              <span>Mod√®le</span>
              <select id="red-model">
                {% for model in models %}
                <option value="{{ model }}" {% if model==default_red %}selected{% endif %}>
                  {{ model }}
                </option>
                {% endfor %}
              </select>
            </label>
            <div class="thoughts" id="red-thoughts"></div>
          </aside>

          <section class="board-card">
            <label class="field">
              <span>Variant</span>
              <select id="variant">
                <option value="normal" {% if default_variant=="normal" %}selected{% endif %}>
                  Normal
                </option>
                <option value="a" {% if default_variant=="a" %}selected{% endif %}>
                  Variante A
                </option>
                <option value="b" {% if default_variant=="b" %}selected{% endif %}>
                  Variante B
                </option>
              </select>
            </label>

            <div class="status-wrap" id="message"></div>
            <div class="board" id="board"></div>

            <div class="human-row" id="human-row" hidden>
              <div class="human-title">Choisissez votre mouvement</div>
              <div class="human-buttons">
                <button class="btn btn-human" data-move="1">1</button>
                <button class="btn btn-human" data-move="2">2</button>
                <button class="btn btn-human" data-move="3">3</button>
                <button class="btn btn-human" data-move="4">4</button>
              </div>
            </div>

            <div class="controls">
              <button class="btn" id="move-btn">Prochain coup</button>
              <button class="btn btn-primary" id="run-btn">Lancer la partie</button>
              <button class="btn btn-danger" id="reset-btn">R√©initialiser</button>
            </div>

            <div class="repo-link">
              <a href="https://github.com/a3jeu/nim-llm-game" target="_blank" rel="noreferrer">
                Voir le d√©p√¥t
              </a>
            </div>
          </section>

          <aside class="player-card">
            <div class="player-title blue">üîµ Joueur Bleu</div>
            <label class="field">
              <span>Mod√®le</span>
              <select id="blue-model">
                {% for model in models %}
                <option value="{{ model }}" {% if model==default_blue %}selected{% endif %}>
                  {{ model }}
                </option>
                {% endfor %}
              </select>
            </label>
            <div class="thoughts" id="blue-thoughts"></div>
          </aside>
        </div>
      </section>

      <section id="tab-leaderboard" class="tab-panel">
        <div class="leaderboard-grid">
          <div class="table-card">
            <div class="table-title">Classements ELO</div>
            <table>
              <thead>
                <tr>
                  <th>Joueur</th>
                  <th>Elo</th>
                  <th>Normal</th>
                  <th>Variante A</th>
                  <th>Variante B</th>
                </tr>
              </thead>
              <tbody id="ratings-body"></tbody>
            </table>
          </div>
          <div class="table-card">
            <div class="table-title">Historique des parties</div>
            <table>
              <thead>
                <tr>
                  <th>Date</th>
                  <th>Variante</th>
                  <th>Rouge</th>
                  <th>Bleu</th>
                  <th>Gagnant</th>
                </tr>
              </thead>
              <tbody id="results-body"></tbody>
            </table>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script>
    const DEFAULTS = {
      red: "{{ default_red }}",
      blue: "{{ default_blue }}",
      variant: "{{ default_variant }}",
    };
  </script>
  <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>

</html>